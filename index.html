<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kids Soundboard</title>
    <style>
        /* --- Child Friendly & iPad Styling --- */
        body {
            margin: 0;
            padding: 0;
            background-color: #f0f8ff; /* AliceBlue - soft background */
            font-family: "Chalkboard SE", "Comic Sans MS", sans-serif; /* Friendly fonts */
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none; /* Prevents text selection */
            -webkit-user-select: none;
        }

        #grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 columns */
            gap: 20px;
            width: 90vw;
            max-width: 800px;
            aspect-ratio: 1 / 1; /* Keeps the whole container square-ish */
        }

        .sound-btn {
            background-color: #4CAF50; /* Nice Green */
            border: none;
            border-radius: 25px; /* Big rounded corners */
            color: white;
            font-size: 4rem; /* Big text */
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px #2E7D32; /* 3D effect */
            transition: all 0.1s;
            display: flex;
            justify-content: center;
            align-items: center;
            -webkit-tap-highlight-color: transparent; /* Removes grey tap box on iPad */
            outline: none;
        }

        .sound-btn:active {
            transform: translateY(4px); /* Push down effect */
            box-shadow: 0 4px #2E7D32;
        }

        /* Style for when the button is in "Playing" mode */
        .sound-btn.playing {
            background-color: #FF5722; /* Orange/Red for Stop */
            box-shadow: 0 8px #bf360c;
        }
        .sound-btn.playing:active {
            box-shadow: 0 4px #bf360c;
        }

        /* Responsive adjustment for smaller screens if needed */
        @media (max-width: 600px) {
            .sound-btn { font-size: 3rem; }
            #grid-container { gap: 10px; }
        }
    </style>
</head>
<body>

    <div id="grid-container">
        <!-- Buttons will be generated by JavaScript -->
    </div>

    <script>
        // --- CONFIGURATION ---
        // Just change the filenames here to add/remove media.
        // Ensure your audio files are in the same folder as this index.html file.
        const soundMap = {
            1: 'sounds/Cordes/Exercice1/1.m4a',
            2: 'sounds/Cordes/Exercice1/2.m4a',
            3: 'sounds/Cordes/Exercice1/3.m4a',
            4: 'sounds/Cordes/Exercice1/4.m4a',
            5: 'sounds/Cordes/Exercice1/5.mp3'
        };

        // --- STATE VARIABLES ---
        let currentAudio = null;       // Stores the actual Audio object
        let currentButtonId = null;    // Stores the ID of the playing button

        const container = document.getElementById('grid-container');

        // --- INITIALIZATION ---
        // Loop through 1 to 9 to create buttons
        for (let i = 1; i <= 9; i++) {
            // Create Button Element
            const btn = document.createElement('button');
            btn.className = 'sound-btn';
            btn.id = 'btn-' + i;
            btn.textContent = i; // Initial label is the number
            
            // Add click event (works for touch on iPad too)
            btn.addEventListener('click', () => handlePress(i));
            
            // Add to grid
            container.appendChild(btn);
        }

        // --- LOGIC ---
        function handlePress(id) {
            const btn = document.getElementById('btn-' + id);
            const file = soundMap[id];

            // Scenario 1: We clicked the button that is ALREADY playing
            if (currentAudio && currentButtonId === id) {
                stopAll();
                return; 
            }

            // Scenario 2: We clicked a new button (or nothing was playing)
            
            // First, stop anything else that might be playing
            if (currentAudio) {
                stopAll();
            }

            // Start the new sound
            playAudio(id, btn, file);
        }

        function playAudio(id, btn, file) {
            // Create new audio object
            currentAudio = new Audio(file);
            currentButtonId = id;

            // Update UI: Change Number to Stop Square (Unicode: ■)
            btn.textContent = "■"; 
            btn.classList.add('playing');

            // Play the audio
            currentAudio.play().catch(e => console.log("Audio play error:", e));

            // Event: When audio finishes naturally
            currentAudio.onended = () => {
                resetButtonUI(btn, id);
                currentAudio = null;
                currentButtonId = null;
            };
        }

        function stopAll() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0; // Reset to start
                
                // Reset the UI of the button that was playing
                if (currentButtonId) {
                    const prevBtn = document.getElementById('btn-' + currentButtonId);
                    resetButtonUI(prevBtn, currentButtonId);
                }
                
                currentAudio = null;
                currentButtonId = null;
            }
        }

        function resetButtonUI(btn, id) {
            if(btn) {
                btn.textContent = id; // Turn back to number
                btn.classList.remove('playing');
            }
        }
    </script>
</body>
</html>
